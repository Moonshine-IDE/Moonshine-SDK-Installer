<?xml version="1.0" encoding="utf-8"?>
<s:Window xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx" width="500" height="200">
	<fx:Metadata>
		[Event( name="UPDATEYES" )]
		[Event( name="UPDATENO" )]
		[Event( name="UPDATECANCEL" )]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import actionScripts.extSources.nativeApplicationUpdater.NativeApplicationUpdater;
			
			//--------------------------------------------------------------------------
			//
			//  PUBLIC VARIABLES
			//
			//--------------------------------------------------------------------------
			
			[Bindable] public var downlaoding			: Boolean;
			[Bindable] public var updater				: NativeApplicationUpdater;
			
		]]>
	</fx:Script>
	
	<s:layout>
		<s:HorizontalLayout verticalAlign="middle" horizontalAlign="center"/>
	</s:layout>
	
	<s:Image source="@Embed('/assets/images/imgInstall.png')"/>
	<s:VGroup>
		<s:Label text="Updates:"/>
		<s:Label text="New version ({updater.updateVersion}) is available."/>
		<s:Label text="Do you want to download it and install?"/>
		<mx:ProgressBar id="prgBar" source="{updater}" label="{(downlaoding)?'Downloading %3%':''}" alpha="{(downlaoding)?1:.3}" />
		<s:HGroup width="100%">
			<s:Button label="YES" 
					  click="dispatchEvent(new Event('UPDATEYES')); downlaoding=true; btnCancel.percentWidth=40" enabled="{!downlaoding}"
					  width="30%"/>
			<s:Button id="btnCancel" 
					  label="{(!downlaoding)?'NO':'CANCEL'}"
					  click="(downlaoding)?dispatchEvent(new Event('UPDATECANCEL')):dispatchEvent(new Event('UPDATENO'))"
					  width="30%"/>
		</s:HGroup>
	</s:VGroup>
</s:Window>